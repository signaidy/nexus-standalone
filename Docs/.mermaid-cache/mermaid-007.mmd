graph LR
  GH[GitHub]:::ext --> DR[Drone Server]:::ci
  DR --> RR[Drone Runner Kube]:::ci
  RR -->|kaniko/gcb| AR[(Artifact Registry)]:::gcp
  DR --> SQ[(SonarQube VM)]:::gcp
  DR -->|kubectl apply -k| GKE[(GKE Autopilot)]:::gcp
  subgraph GKE Namespaces
    D[dev]:::ns
    U[uat]:::ns
    M[main]:::ns
  end
  AR --> D
  AR --> U
  AR --> M

  classDef ext fill:#f6f6f6,stroke:#999
  classDef ci fill:#eef2ff,stroke:#6366f1
  classDef gcp fill:#f0f9ff,stroke:#3b82f6
  classDef ns fill:#ecfdf5,stroke:#10b981